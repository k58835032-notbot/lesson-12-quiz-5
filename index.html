<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>„Çè„Éª„Çí Listening Quiz</title>

<style>
body{
  font-family:"Hiragino Kaku Gothic Pro","Meiryo",sans-serif;
  text-align:center;
  padding:30px;
}
h1{color:#b23b3b}

button{
  font-size:18px;
  padding:12px 20px;
  margin:8px;
  border-radius:12px;
  cursor:pointer;
  transition:.3s;
}

#playSound{
  background:white;
  color:#b23b3b;
  border:3px solid #b23b3b;
}
#playSound:hover{background:#ffe6f2}

.choice{
  background:#b23b3b;
  color:white;
  border:2px solid #b23b3b;
}
.choice:hover{background:#ff4da6}

#choices{
  display:flex;
  flex-wrap:wrap;
  justify-content:center;
  max-width:820px;
  margin:auto;
}

#result{
  font-size:20px;
  margin-top:20px;
  white-space:pre-line;
}
</style>
</head>

<body>

<h1>üéß „Çè„Éª„Çí „ÇØ„Ç§„Ç∫</h1>

<button id="playSound">‚ñ∂Ô∏è Play Audio</button>

<div id="choices"></div>
<div id="result"></div>

<script>
/* ================= AUDIO ================= */

// üëâ replace later with your GitHub raw path
const AUDIO_BASE =
"https://raw.githubusercontent.com/k58835032-notbot/lesson-12-quiz-5/main/audio/";


let audio = new Audio();

/* ================= DATA ================= */

const items = [
  {jp:"„Çè„Åü„Åó", meaning:"I", audio:"watashi.mp3"},
  {jp:"„Çè„Åã„Çã", meaning:"to understand", audio:"wakaru.mp3"},
  {jp:"„Çè„Åã„Çâ„Å™„ÅÑ", meaning:"don‚Äôt understand", audio:"wakaranai.mp3"},
  {jp:"„Çè„Çã„ÅÑ", meaning:"bad", audio:"warui.mp3"},
  {jp:"„Çè„Åô„Çå„Çã", meaning:"to forget", audio:"wasureru.mp3"},
  {jp:"„Çè„Çâ„ÅÜ", meaning:"to laugh", audio:"warau.mp3"},
  {jp:"„Çè„Çâ„ÅÑ", meaning:"laughter", audio:"warai.mp3"},

  {jp:"„ÇÜ„Å≥„Çè", meaning:"ring / circle", audio:"yubiwa.mp3"},
  {jp:"„Çè„Å´", meaning:"crocodile", audio:"wani.mp3"},
  {jp:"„Çè„Åó", meaning:"eagle / rough I", audio:"washi.mp3"},
  {jp:"„Çè„Åã„ÇÅ", meaning:"seaweed", audio:"wakame.mp3"},
  {jp:"„Çè„Åü", meaning:"cotton", audio:"wata.mp3"},
  {jp:"„Çè„Å™", meaning:"trap", audio:"wana.mp3"},
  {jp:"„Çè„Åè", meaning:"to boil / excited", audio:"waku.mp3"},
  {jp:"„Çè„Åü„Åô", meaning:"to hand over", audio:"watasu.mp3"},
  {jp:"„Çè„Åã„Çå„Çã", meaning:"to separate", audio:"wakareru.mp3"},
  {jp:"„Çè„Çå„Çã", meaning:"to break", audio:"wareru.mp3"},

  {jp:"„Çè„Åã„ÅÑ", meaning:"young", audio:"wakai.mp3"},
  {jp:"„Çè„Åö„Åã", meaning:"a little", audio:"wazuka.mp3"},
  {jp:"„Çè„Çä„Å®", meaning:"relatively", audio:"warito.mp3"},
  {jp:"„Çè„Åñ„Å®", meaning:"on purpose", audio:"wazato.mp3"},

  {jp:"„Åª„Çì „Çí „Çà„ÇÄ„ÄÇ", meaning:"read a book", audio:"hon o yomu.mp3"},
  {jp:"„Åø„Åö „Çí „ÅÆ„ÇÄ„ÄÇ", meaning:"drink water", audio:"mizu o nomu.mp3"},
  {jp:"„Åî„ÅØ„Çì „Çí „Åü„Åπ„Çã„ÄÇ", meaning:"eat a meal", audio:"gohan o taberu.mp3"},
  {jp:"„Åà „Çí „Åã„Åè„ÄÇ", meaning:"draw a picture", audio:"e o kaku.mp3"},
  {jp:"„Å¶ „Çí „ÅÇ„Çâ„ÅÜ„ÄÇ", meaning:"wash hands", audio:"te o arau.mp3"},
  {jp:"„Åè„Å§ „Çí „ÅØ„Åè„ÄÇ", meaning:"put on shoes", audio:"kutsu o haku.mp3"},
  {jp:"„Åã„Å∞„Çì „Çí „ÇÇ„Å§„ÄÇ", meaning:"carry a bag", audio:"kaban o motsu.mp3"},
  {jp:"„Å©„ÅÇ „Çí „ÅÇ„Åë„Çã„ÄÇ", meaning:"open the door", audio:"doa o akeru.mp3"},
  {jp:"„Åæ„Å© „Çí „Åó„ÇÅ„Çã„ÄÇ", meaning:"close the window", audio:"mado o shimeru.mp3"},
  {jp:"„Çä„Çì„Åî „Çí „Åü„Åπ„Çã„ÄÇ", meaning:"eat an apple", audio:"ringo o taberu.mp3"},
  {jp:"„Å±„Çì „Çí „Åã„ÅÜ„ÄÇ", meaning:"buy bread", audio:"pan o kau.mp3"},
  {jp:"„Å¶„Çå„Å≥ „Çí „Åø„Çã„ÄÇ", meaning:"watch TV", audio:"terebi o miru.mp3"},
  {jp:"„Åä„Çì„Åå„Åè „Çí „Åç„Åè„ÄÇ", meaning:"listen to music", audio:"ongaku o kiku.mp3"},
  {jp:"„Åà„Åç „Çí „Åß„Çã„ÄÇ", meaning:"leave station", audio:"eki o deru.mp3"},
  {jp:"„Åø„Å° „Çí „ÅÇ„Çã„Åè„ÄÇ", meaning:"walk on road", audio:"michi o aruku.mp3"}
];

/* ================= DISTRACTORS ================= */

const WA_REP = ["„Å≠","„Çå","„ÇÜ"];
const WO_REP = ["„Å°","„Çç","„Åä","„Åï"];

function makeDistractors(correct){
  const set = new Set();
  WA_REP.forEach(r=>{
    if(correct.includes("„Çè")) set.add(correct.replace(/„Çè/g,r));
  });
  WO_REP.forEach(r=>{
    if(correct.includes("„Çí")) set.add(correct.replace(/„Çí/g,r));
  });
  return [...set].slice(0,3);
}

/* ================= QUIZ ================= */

let current;
let count=0;
const maxQ=25;

const choicesDiv=document.getElementById("choices");
const resultDiv=document.getElementById("result");
const playBtn=document.getElementById("playSound");

playBtn.onclick=()=>{
  if(!current) return;
  audio.src=AUDIO_BASE+current.audio;
  audio.currentTime=0;
  audio.play().catch(()=>alert("Audio not found"));
};

function newQuestion(){
  if(count>=maxQ){
    resultDiv.textContent="üéâ Finished!";
    choicesDiv.innerHTML="";
    return;
  }

  count++;
  current=items[Math.floor(Math.random()*items.length)];
  choicesDiv.innerHTML="";
  resultDiv.textContent=`Q ${count} / ${maxQ}`;

  const options=[...makeDistractors(current.jp),current.jp]
    .sort(()=>Math.random()-0.5);

  options.forEach(o=>{
    const b=document.createElement("button");
    b.className="choice";
    b.textContent=o;
    b.onclick=()=>check(o);
    choicesDiv.appendChild(b);
  });
}

function check(ans){
  if(ans===current.jp){
    resultDiv.textContent=`‚≠ï Correct!\n${current.jp}\n${current.meaning}`;
  }else{
    resultDiv.textContent=`‚ùå Wrong!\nCorrect: ${current.jp}\n${current.meaning}`;
  }
  setTimeout(newQuestion,1500);
}

newQuestion();
</script>

</body>
</html>
